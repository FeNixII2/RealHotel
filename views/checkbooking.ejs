<section id="checkbooking" style="position: relative;">
    <div class="backgroundpage-image"></div>

    <div class="container pt-5 d-flex flex-column justify-content-between align-items-center min-vh-100" style="background-color: rgba(255, 255, 255, 0.6);">
        <div class="container">
            <div class="checkbooking-section pb-5">

                <div class="textcheck  pt-4 fs-3 d-flex justify-content-center mb-4">ตรวจสอบการจองห้องพัก</div>

                <form class="d-flex" action="javascript:room_code_checking()">
                    <input class="form-control me-2" type="text" id="id_numcheckbooking" placeholder="กรอกรหัสห้องพัก" aria-label="Search" title="กรุณากรอกรหัสห้องพัก" required>
                    <button class="btn btn-outline-success" type="submit">ค้นหา</button>
                </form>

                <div id="card-booking"></div>


            </div>
        </div>
        <footer-component></footer-component>
    </div>


</section>

<script>
    function room_code_checking() {
        var code = document.getElementById("id_numcheckbooking").value

        fetch("/get_booking_code", {
            method: "post",
            headers: {
                Accept: "application/json",
                "Content-Type": "application/json"
            },

            body: JSON.stringify({
                code
            })
        }).then((response) => response.json()).then((body) => {
            var reserv = body.result
            console.log(reserv.length);
            if (reserv.length > 0) {
                Swal.fire({
                    title: "Enter the last 4 digits of your phone number:",
                    input: "text",
                    inputAttributes: {
                        placeholder: "Last 4 digits",
                        inputmode: "numeric",
                        pattern: "[0-9]{4}",
                        minLength: 4,
                        maxLength: 4,
                    },
                    customClass: {
                        container: "mt-5",
                    },
                    position: "top",
                    showCancelButton: true,
                    confirmButtonText: "Confirm",
                    cancelButtonText: "Cancel",
                    preConfirm: (value) => {
                        if (!/^\d{4}$/.test(value)) {

                            return Promise.reject("Please enter a 4-digit numeric value");

                        } else {
                            return value;
                        }
                    },
                }).then((result) => {
                    if (result.isConfirmed) {
                        const phoneNumber = result.value;
                        console.log("Confirmed with phone number:", phoneNumber);
                        // Perform further actions with the phone number
                    } else if (result.dismiss === Swal.DismissReason.cancel) {
                        console.log("Cancelled");
                        // Perform further actions for cancellation
                    }
                });

            } else {

            }
        })
    }
</script>